import{i as e,h as t,r as s,o as l,c as o,w as a,a as i,n as r,b as c,d as n,t as d,e as u,f as h,I as p,g as f,j as m,F as _,k as b,l as y,m as k,p as g,s as w,q as x,u as C,v as S,x as v,S as I,y as V,z as B}from"./index-2701eff4.js";import{r as K,_ as L}from"./uni-app.es.2e4ba13a.js";import{_ as $}from"./_plugin-vue_export-helper.1b428a4d.js";import{_ as j}from"./uni-easyinput.0f774f90.js";import{_ as T}from"./uni-popup.a7aecad4.js";import{i as F,a as P}from"./helper.4dff2ea1.js";const z={en:{"uni-search-bar.cancel":"cancel","uni-search-bar.placeholder":"Search enter content"},"zh-Hans":{"uni-search-bar.cancel":"cancel","uni-search-bar.placeholder":"请输入搜索内容"},"zh-Hant":{"uni-search-bar.cancel":"cancel","uni-search-bar.placeholder":"請輸入搜索內容"}},{t:N}=e(z);const H=$({name:"UniSearchBar",emits:["input","update:modelValue","clear","cancel","confirm","blur","focus"],props:{placeholder:{type:String,default:""},radius:{type:[Number,String],default:5},clearButton:{type:String,default:"auto"},cancelButton:{type:String,default:"auto"},cancelText:{type:String,default:"取消"},bgColor:{type:String,default:"#F8F8F8"},maxlength:{type:[Number,String],default:100},value:{type:[Number,String],default:""},modelValue:{type:[Number,String],default:""},focus:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1}},data:()=>({show:!1,showSync:!1,searchVal:""}),computed:{cancelTextI18n(){return this.cancelText||N("uni-search-bar.cancel")},placeholderText(){return this.placeholder||N("uni-search-bar.placeholder")}},watch:{modelValue:{immediate:!0,handler(e){this.searchVal=e,e&&(this.show=!0)}},focus:{immediate:!0,handler(e){if(e){if(this.readonly)return;this.show=!0,this.$nextTick((()=>{this.showSync=!0}))}}},searchVal(e,t){this.$emit("input",e),this.$emit("update:modelValue",e)}},methods:{searchClick(){this.readonly||this.show||(this.show=!0,this.$nextTick((()=>{this.showSync=!0})))},clear(){this.$emit("clear",{value:this.searchVal}),this.searchVal=""},cancel(){this.readonly||(this.$emit("cancel",{value:this.searchVal}),this.searchVal="",this.show=!1,this.showSync=!1,t())},confirm(){t(),this.$emit("confirm",{value:this.searchVal})},blur(){t(),this.$emit("blur",{value:this.searchVal})},emitFocus(e){this.$emit("focus",e.detail)}}},[["render",function(e,t,m,_,b,y){const k=K(s("uni-icons"),L),g=h,w=p,x=f;return l(),o(g,{class:"uni-searchbar"},{default:a((()=>[i(g,{style:r({borderRadius:m.radius+"px",backgroundColor:m.bgColor}),class:"uni-searchbar__box",onClick:y.searchClick},{default:a((()=>[i(g,{class:"uni-searchbar__box-icon-search"},{default:a((()=>[c(e.$slots,"searchIcon",{},(()=>[i(k,{color:"#c0c4cc",size:"18",type:"search"})]),!0)])),_:3}),b.show||b.searchVal?(l(),o(w,{key:0,focus:b.showSync,disabled:m.readonly,placeholder:y.placeholderText,maxlength:m.maxlength,class:"uni-searchbar__box-search-input","confirm-type":"search",type:"text",modelValue:b.searchVal,"onUpdate:modelValue":t[0]||(t[0]=e=>b.searchVal=e),onConfirm:y.confirm,onBlur:y.blur,onFocus:y.emitFocus},null,8,["focus","disabled","placeholder","maxlength","modelValue","onConfirm","onBlur","onFocus"])):(l(),o(x,{key:1,class:"uni-searchbar__text-placeholder"},{default:a((()=>[n(d(m.placeholder),1)])),_:1})),b.show&&("always"===m.clearButton||"auto"===m.clearButton&&""!==b.searchVal)&&!m.readonly?(l(),o(g,{key:2,class:"uni-searchbar__box-icon-clear",onClick:y.clear},{default:a((()=>[c(e.$slots,"clearIcon",{},(()=>[i(k,{color:"#c0c4cc",size:"20",type:"clear"})]),!0)])),_:3},8,["onClick"])):u("",!0)])),_:3},8,["style","onClick"]),"always"===m.cancelButton||b.show&&"auto"===m.cancelButton?(l(),o(x,{key:0,onClick:y.cancel,class:"uni-searchbar__cancel"},{default:a((()=>[n(d(y.cancelTextI18n),1)])),_:1},8,["onClick"])):u("",!0)])),_:3})}],["__scopeId","data-v-03210105"]]);const U=$({name:"UniSwiperDot",emits:["clickItem"],props:{info:{type:Array,default:()=>[]},current:{type:Number,default:0},dotsStyles:{type:Object,default:()=>({})},mode:{type:String,default:"default"},field:{type:String,default:""}},data:()=>({dots:{width:6,height:6,bottom:10,color:"#fff",backgroundColor:"rgba(0, 0, 0, .3)",border:"1px rgba(0, 0, 0, .3) solid",selectedBackgroundColor:"#333",selectedBorder:"1px rgba(0, 0, 0, .9) solid"}}),watch:{dotsStyles(e){this.dots=Object.assign(this.dots,this.dotsStyles)},mode(e){"indexes"===e?(this.dots.width=14,this.dots.height=14):(this.dots.width=6,this.dots.height=6)}},created(){"indexes"===this.mode&&(this.dots.width=12,this.dots.height=12),this.dots=Object.assign(this.dots,this.dotsStyles)},methods:{clickItem(e){this.$emit("clickItem",e)}}},[["render",function(e,t,s,p,k,g){const w=h,x=f;return l(),o(w,{class:"uni-swiper__warp"},{default:a((()=>[c(e.$slots,"default",{},void 0,!0),"default"===s.mode?(l(),o(w,{style:r({bottom:k.dots.bottom+"px"}),class:"uni-swiper__dots-box",key:"default"},{default:a((()=>[(l(!0),m(_,null,b(s.info,((e,t)=>(l(),o(w,{onClick:e=>g.clickItem(t),style:r({width:(t===s.current?2*k.dots.width:k.dots.width)+"px",height:k.dots.width/2+"px","background-color":t!==s.current?k.dots.backgroundColor:k.dots.selectedBackgroundColor,"border-radius":"0px"}),key:t,class:"uni-swiper__dots-item uni-swiper__dots-bar"},null,8,["onClick","style"])))),128))])),_:1},8,["style"])):u("",!0),"dot"===s.mode?(l(),o(w,{style:r({bottom:k.dots.bottom+"px"}),class:"uni-swiper__dots-box",key:"dot"},{default:a((()=>[(l(!0),m(_,null,b(s.info,((e,t)=>(l(),o(w,{onClick:e=>g.clickItem(t),style:r({width:k.dots.width+"px",height:k.dots.height+"px","background-color":t!==s.current?k.dots.backgroundColor:k.dots.selectedBackgroundColor,border:t!==s.current?k.dots.border:k.dots.selectedBorder}),key:t,class:"uni-swiper__dots-item"},null,8,["onClick","style"])))),128))])),_:1},8,["style"])):u("",!0),"round"===s.mode?(l(),o(w,{style:r({bottom:k.dots.bottom+"px"}),class:"uni-swiper__dots-box",key:"round"},{default:a((()=>[(l(!0),m(_,null,b(s.info,((e,t)=>(l(),o(w,{onClick:e=>g.clickItem(t),class:y([[t===s.current&&"uni-swiper__dots-long"],"uni-swiper__dots-item"]),style:r({width:(t===s.current?3*k.dots.width:k.dots.width)+"px",height:k.dots.height+"px","background-color":t!==s.current?k.dots.backgroundColor:k.dots.selectedBackgroundColor,border:t!==s.current?k.dots.border:k.dots.selectedBorder}),key:t},null,8,["onClick","class","style"])))),128))])),_:1},8,["style"])):u("",!0),"nav"===s.mode?(l(),o(w,{key:"nav",style:r({"background-color":s.dotsStyles.backgroundColor,bottom:"0"}),class:"uni-swiper__dots-box uni-swiper__dots-nav"},{default:a((()=>[i(x,{style:r({color:s.dotsStyles.color}),class:"uni-swiper__dots-nav-item"},{default:a((()=>[n(d(s.current+1+"/"+s.info.length+" "+s.info[s.current][s.field]),1)])),_:1},8,["style"])])),_:1},8,["style"])):u("",!0),"indexes"===s.mode?(l(),o(w,{key:"indexes",style:r({bottom:k.dots.bottom+"px"}),class:"uni-swiper__dots-box"},{default:a((()=>[(l(!0),m(_,null,b(s.info,((e,t)=>(l(),o(w,{onClick:e=>g.clickItem(t),style:r({width:k.dots.width+"px",height:k.dots.height+"px",color:t===s.current?k.dots.selectedColor:k.dots.color,"background-color":t!==s.current?k.dots.backgroundColor:k.dots.selectedBackgroundColor,border:t!==s.current?k.dots.border:k.dots.selectedBorder}),key:t,class:"uni-swiper__dots-item uni-swiper__dots-indexes"},{default:a((()=>[i(x,{class:"uni-swiper__dots-indexes-text"},{default:a((()=>[n(d(t+1),1)])),_:2},1024)])),_:2},1032,["onClick","style"])))),128))])),_:1},8,["style"])):u("",!0)])),_:3})}],["__scopeId","data-v-77e8f2a6"]]);const D=$({data:()=>({title:"",info:[{url:"https://ele-cat.gitee.io/ks/static/images/swiper_1.png"},{url:"https://ele-cat.gitee.io/ks/static/images/swiper_2.png"},{url:"https://ele-cat.gitee.io/ks/static/images/swiper_3.png"}],current:0,mode:"default",centerList:[],bottomList:[],timer:null,secretKey:"",checkPeriod:3e3}),onHide(){this.timer&&clearInterval(this.timer)},onShow(){this.checkSecretKey(),this.timer=setInterval((()=>{this.checkSecretKey()}),this.checkPeriod),k(),this.title=g("title")||"圈子",document.title=this.title,w({title:this.title}),x("title",this.title);const e=g("centerList")||F;x("centerList",e),this.centerList=e;const t=g("bottomList")||P;x("bottomList",t),this.bottomList=t},methods:{checkSecretKey(){let e=g("secretKey");console.log("secretKey",e),e&&e==this.returnSecretKey()?(S(),this.timer&&clearInterval(this.timer),this.timer=setInterval((()=>{this.checkSecretKey()}),this.checkPeriod)):(C(),this.$nextTick((()=>{this.showPop(),this.timer&&clearInterval(this.timer)})))},showPop(){this.$refs.popup.open("center")},hidePop(){this.$refs.popup.close(),this.timer&&clearInterval(this.timer),this.timer=setInterval((()=>{this.checkSecretKey()}),this.checkPeriod)},confirm(){this.secretKey===this.returnSecretKey()?(this.hidePop(),x("secretKey",this.secretKey),this.secretKey=""):v({title:"密钥错误",icon:"error"})},returnSecretKey(){let e=new Date;return e.setHours(12,0,0,0),btoa(e.getTime()/1e3)},change(e){this.current=e.detail.current},handleSub(e,t){let s=Number(this.bottomList[t].left);s-=1,this.bottomList[t].left=s||999,x("bottomList",this.bottomList);let l=g("selectList")||[];if(l.find((t=>t.id==e.id))){let t=l.findIndex((t=>t.id==e.id));l[t].count+=1}else l.push({...e,count:1});x("selectList",l)}}},[["render",function(e,t,r,c,u,p){const y=h,k=f,g=K(s("uni-search-bar"),H),w=K(s("uni-icons"),L),x=B,C=I,S=K(s("uni-swiper-dot"),U),v=K(s("uni-easyinput"),j),$=K(s("uni-popup"),T);return l(),o(y,null,{default:a((()=>[i(y,{class:"top"},{default:a((()=>[i(y,{class:"top-bg"}),i(y,{class:"search-box"},{default:a((()=>[i(k,{class:"title"},{default:a((()=>[n(d(u.title),1)])),_:1}),i(g,{class:"search-bar",radius:"100",placeholder:"输入任务编号搜索",clearButton:"none",cancelButton:"none"}),i(w,{type:"scan",size:"24",color:"#fff"})])),_:1}),i(S,{info:u.info,current:u.current,field:"content",mode:u.mode},{default:a((()=>[i(C,{class:"swiper-box",interval:3500,autoplay:!0,onChange:p.change},{default:a((()=>[(l(!0),m(_,null,b(u.info,((e,t)=>(l(),o(x,{key:t},{default:a((()=>[i(y,{class:"swiper-item"},{default:a((()=>[V("img",{src:e.url,alt:"",srcset:""},null,8,["src"])])),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["onChange"])])),_:1},8,["info","current","mode"])])),_:1}),i(y,{class:"center"},{default:a((()=>[(l(!0),m(_,null,b(u.centerList,((e,t)=>(l(),o(y,{class:"center-box",key:t},{default:a((()=>[V("img",{src:e.img,alt:""},null,8,["src"]),i(y,{class:"title"},{default:a((()=>[n(d(e.title),1)])),_:2},1024),i(y,{class:"type"},{default:a((()=>[n(d(e.type),1)])),_:2},1024),i(y,{class:"price"},{default:a((()=>[n("+"+d(e.price),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1}),i(y,{class:"bottom"},{default:a((()=>[i(y,{class:"bottom_nav"},{default:a((()=>[i(y,{class:"title"},{default:a((()=>[n("全部任务")])),_:1}),i(y,{class:"nav"},{default:a((()=>[i(k,{class:"active"},{default:a((()=>[n("默认排序")])),_:1}),i(k,null,{default:a((()=>[n("最新发布")])),_:1}),i(k,null,{default:a((()=>[n("佣金最高")])),_:1})])),_:1})])),_:1}),i(y,{class:"bottom-list"},{default:a((()=>[(l(!0),m(_,null,b(u.bottomList,((e,t)=>(l(),o(y,{class:"bottom-item",key:t},{default:a((()=>[i(y,{class:"img"},{default:a((()=>[V("img",{src:e.img,alt:""},null,8,["src"])])),_:2},1024),i(y,{class:"info"},{default:a((()=>[i(y,{class:"title"},{default:a((()=>[i(k,null,{default:a((()=>[n(d(e.title),1)])),_:2},1024),i(k,null,{default:a((()=>[n("+"+d(e.price),1)])),_:2},1024)])),_:2},1024),i(y,{class:"type"},{default:a((()=>[i(k,null,{default:a((()=>[n("ID:"+d(10320+t),1)])),_:2},1024),i(k,null,{default:a((()=>[n(d(e.type),1)])),_:2},1024)])),_:2},1024),i(y,{class:"left"},{default:a((()=>[i(k,null,{default:a((()=>[n("剩余 "+d(e.left)+"/已结 "+d(e.used),1)])),_:2},1024),i(k,{class:"btn",onClick:s=>p.handleSub(e,t)},{default:a((()=>[n("接单")])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1}),i($,{ref:"popup",type:"bottom",class:"popup-box","background-color":"#fff","border-radius":"10px 10px 0 0","is-mask-click":!1},{default:a((()=>[i(y,{class:"title"},{default:a((()=>[n("请联系【系统管理员】获取密钥")])),_:1}),i(y,{class:"input"},{default:a((()=>[i(v,{focus:"",modelValue:u.secretKey,"onUpdate:modelValue":t[0]||(t[0]=e=>u.secretKey=e),placeholder:"请输入密钥"},null,8,["modelValue"])])),_:1}),i(y,{class:"btn",onClick:p.confirm},{default:a((()=>[n("确认")])),_:1},8,["onClick"])])),_:1},512)])),_:1})}],["__scopeId","data-v-22a6996a"]]);export{D as default};
