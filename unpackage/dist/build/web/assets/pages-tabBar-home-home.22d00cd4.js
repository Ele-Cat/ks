import{i as e,h as t,r as s,o as l,c as o,w as a,a as r,n as i,b as c,d as n,t as d,e as u,f as h,I as p,g as f,j as m,F as _,k as y,l as b,m as g,p as k,s as w,q as x,u as S,v as C,x as v,y as I,S as V,z as B,A as K}from"./index-0e92d750.js";import{r as L,_ as $}from"./uni-app.es.fa42fef7.js";import{_ as j}from"./_plugin-vue_export-helper.1b428a4d.js";import{_ as T}from"./uni-easyinput.f4ded3ea.js";import{_ as F}from"./uni-popup.88d04f74.js";import{i as P,a as z}from"./helper.4dff2ea1.js";const N={en:{"uni-search-bar.cancel":"cancel","uni-search-bar.placeholder":"Search enter content"},"zh-Hans":{"uni-search-bar.cancel":"cancel","uni-search-bar.placeholder":"请输入搜索内容"},"zh-Hant":{"uni-search-bar.cancel":"cancel","uni-search-bar.placeholder":"請輸入搜索內容"}},{t:H}=e(N);const U=j({name:"UniSearchBar",emits:["input","update:modelValue","clear","cancel","confirm","blur","focus"],props:{placeholder:{type:String,default:""},radius:{type:[Number,String],default:5},clearButton:{type:String,default:"auto"},cancelButton:{type:String,default:"auto"},cancelText:{type:String,default:"取消"},bgColor:{type:String,default:"#F8F8F8"},maxlength:{type:[Number,String],default:100},value:{type:[Number,String],default:""},modelValue:{type:[Number,String],default:""},focus:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1}},data:()=>({show:!1,showSync:!1,searchVal:""}),computed:{cancelTextI18n(){return this.cancelText||H("uni-search-bar.cancel")},placeholderText(){return this.placeholder||H("uni-search-bar.placeholder")}},watch:{modelValue:{immediate:!0,handler(e){this.searchVal=e,e&&(this.show=!0)}},focus:{immediate:!0,handler(e){if(e){if(this.readonly)return;this.show=!0,this.$nextTick((()=>{this.showSync=!0}))}}},searchVal(e,t){this.$emit("input",e),this.$emit("update:modelValue",e)}},methods:{searchClick(){this.readonly||this.show||(this.show=!0,this.$nextTick((()=>{this.showSync=!0})))},clear(){this.$emit("clear",{value:this.searchVal}),this.searchVal=""},cancel(){this.readonly||(this.$emit("cancel",{value:this.searchVal}),this.searchVal="",this.show=!1,this.showSync=!1,t())},confirm(){t(),this.$emit("confirm",{value:this.searchVal})},blur(){t(),this.$emit("blur",{value:this.searchVal})},emitFocus(e){this.$emit("focus",e.detail)}}},[["render",function(e,t,m,_,y,b){const g=L(s("uni-icons"),$),k=h,w=p,x=f;return l(),o(k,{class:"uni-searchbar"},{default:a((()=>[r(k,{style:i({borderRadius:m.radius+"px",backgroundColor:m.bgColor}),class:"uni-searchbar__box",onClick:b.searchClick},{default:a((()=>[r(k,{class:"uni-searchbar__box-icon-search"},{default:a((()=>[c(e.$slots,"searchIcon",{},(()=>[r(g,{color:"#c0c4cc",size:"18",type:"search"})]),!0)])),_:3}),y.show||y.searchVal?(l(),o(w,{key:0,focus:y.showSync,disabled:m.readonly,placeholder:b.placeholderText,maxlength:m.maxlength,class:"uni-searchbar__box-search-input","confirm-type":"search",type:"text",modelValue:y.searchVal,"onUpdate:modelValue":t[0]||(t[0]=e=>y.searchVal=e),onConfirm:b.confirm,onBlur:b.blur,onFocus:b.emitFocus},null,8,["focus","disabled","placeholder","maxlength","modelValue","onConfirm","onBlur","onFocus"])):(l(),o(x,{key:1,class:"uni-searchbar__text-placeholder"},{default:a((()=>[n(d(m.placeholder),1)])),_:1})),y.show&&("always"===m.clearButton||"auto"===m.clearButton&&""!==y.searchVal)&&!m.readonly?(l(),o(k,{key:2,class:"uni-searchbar__box-icon-clear",onClick:b.clear},{default:a((()=>[c(e.$slots,"clearIcon",{},(()=>[r(g,{color:"#c0c4cc",size:"20",type:"clear"})]),!0)])),_:3},8,["onClick"])):u("",!0)])),_:3},8,["style","onClick"]),"always"===m.cancelButton||y.show&&"auto"===m.cancelButton?(l(),o(x,{key:0,onClick:b.cancel,class:"uni-searchbar__cancel"},{default:a((()=>[n(d(b.cancelTextI18n),1)])),_:1},8,["onClick"])):u("",!0)])),_:3})}],["__scopeId","data-v-03210105"]]);const D=j({name:"UniSwiperDot",emits:["clickItem"],props:{info:{type:Array,default:()=>[]},current:{type:Number,default:0},dotsStyles:{type:Object,default:()=>({})},mode:{type:String,default:"default"},field:{type:String,default:""}},data:()=>({dots:{width:6,height:6,bottom:10,color:"#fff",backgroundColor:"rgba(0, 0, 0, .3)",border:"1px rgba(0, 0, 0, .3) solid",selectedBackgroundColor:"#333",selectedBorder:"1px rgba(0, 0, 0, .9) solid"}}),watch:{dotsStyles(e){this.dots=Object.assign(this.dots,this.dotsStyles)},mode(e){"indexes"===e?(this.dots.width=14,this.dots.height=14):(this.dots.width=6,this.dots.height=6)}},created(){"indexes"===this.mode&&(this.dots.width=12,this.dots.height=12),this.dots=Object.assign(this.dots,this.dotsStyles)},methods:{clickItem(e){this.$emit("clickItem",e)}}},[["render",function(e,t,s,p,g,k){const w=h,x=f;return l(),o(w,{class:"uni-swiper__warp"},{default:a((()=>[c(e.$slots,"default",{},void 0,!0),"default"===s.mode?(l(),o(w,{style:i({bottom:g.dots.bottom+"px"}),class:"uni-swiper__dots-box",key:"default"},{default:a((()=>[(l(!0),m(_,null,y(s.info,((e,t)=>(l(),o(w,{onClick:e=>k.clickItem(t),style:i({width:(t===s.current?2*g.dots.width:g.dots.width)+"px",height:g.dots.width/2+"px","background-color":t!==s.current?g.dots.backgroundColor:g.dots.selectedBackgroundColor,"border-radius":"0px"}),key:t,class:"uni-swiper__dots-item uni-swiper__dots-bar"},null,8,["onClick","style"])))),128))])),_:1},8,["style"])):u("",!0),"dot"===s.mode?(l(),o(w,{style:i({bottom:g.dots.bottom+"px"}),class:"uni-swiper__dots-box",key:"dot"},{default:a((()=>[(l(!0),m(_,null,y(s.info,((e,t)=>(l(),o(w,{onClick:e=>k.clickItem(t),style:i({width:g.dots.width+"px",height:g.dots.height+"px","background-color":t!==s.current?g.dots.backgroundColor:g.dots.selectedBackgroundColor,border:t!==s.current?g.dots.border:g.dots.selectedBorder}),key:t,class:"uni-swiper__dots-item"},null,8,["onClick","style"])))),128))])),_:1},8,["style"])):u("",!0),"round"===s.mode?(l(),o(w,{style:i({bottom:g.dots.bottom+"px"}),class:"uni-swiper__dots-box",key:"round"},{default:a((()=>[(l(!0),m(_,null,y(s.info,((e,t)=>(l(),o(w,{onClick:e=>k.clickItem(t),class:b([[t===s.current&&"uni-swiper__dots-long"],"uni-swiper__dots-item"]),style:i({width:(t===s.current?3*g.dots.width:g.dots.width)+"px",height:g.dots.height+"px","background-color":t!==s.current?g.dots.backgroundColor:g.dots.selectedBackgroundColor,border:t!==s.current?g.dots.border:g.dots.selectedBorder}),key:t},null,8,["onClick","class","style"])))),128))])),_:1},8,["style"])):u("",!0),"nav"===s.mode?(l(),o(w,{key:"nav",style:i({"background-color":s.dotsStyles.backgroundColor,bottom:"0"}),class:"uni-swiper__dots-box uni-swiper__dots-nav"},{default:a((()=>[r(x,{style:i({color:s.dotsStyles.color}),class:"uni-swiper__dots-nav-item"},{default:a((()=>[n(d(s.current+1+"/"+s.info.length+" "+s.info[s.current][s.field]),1)])),_:1},8,["style"])])),_:1},8,["style"])):u("",!0),"indexes"===s.mode?(l(),o(w,{key:"indexes",style:i({bottom:g.dots.bottom+"px"}),class:"uni-swiper__dots-box"},{default:a((()=>[(l(!0),m(_,null,y(s.info,((e,t)=>(l(),o(w,{onClick:e=>k.clickItem(t),style:i({width:g.dots.width+"px",height:g.dots.height+"px",color:t===s.current?g.dots.selectedColor:g.dots.color,"background-color":t!==s.current?g.dots.backgroundColor:g.dots.selectedBackgroundColor,border:t!==s.current?g.dots.border:g.dots.selectedBorder}),key:t,class:"uni-swiper__dots-item uni-swiper__dots-indexes"},{default:a((()=>[r(x,{class:"uni-swiper__dots-indexes-text"},{default:a((()=>[n(d(t+1),1)])),_:2},1024)])),_:2},1032,["onClick","style"])))),128))])),_:1},8,["style"])):u("",!0)])),_:3})}],["__scopeId","data-v-77e8f2a6"]]);const O=j({data:()=>({title:"",info:[{url:"https://ele-cat.gitee.io/ks/static/images/swiper_1.png"},{url:"https://ele-cat.gitee.io/ks/static/images/swiper_2.png"},{url:"https://ele-cat.gitee.io/ks/static/images/swiper_3.png"}],current:0,mode:"default",centerList:[],bottomList:[],timer:null,secretKey:"",checkPeriod:3e3}),onHide(){this.timer&&clearInterval(this.timer)},onShow(){this.checkSecretKey(),this.timer=setInterval((()=>{this.checkSecretKey()}),this.checkPeriod),g(),this.title=k("title")||"圈子",document.title=this.title,w({title:this.title}),x("title",this.title);const e=k("centerList")||P;x("centerList",e),this.centerList=e;const t=k("bottomList")||z;x("bottomList",t),this.bottomList=t},methods:{checkSecretKey(){let e=k("secretKey");console.log("secretKey",e),e&&e==this.returnSecretKey()?(C(),this.timer&&clearInterval(this.timer),this.timer=setInterval((()=>{this.checkSecretKey()}),this.checkPeriod)):(S(),this.$nextTick((()=>{this.showPop(),this.timer&&clearInterval(this.timer)})))},showPop(){this.$refs.popup.open("center")},hidePop(){this.$refs.popup.close(),this.timer&&clearInterval(this.timer),this.timer=setInterval((()=>{this.checkSecretKey()}),this.checkPeriod)},confirm(){this.secretKey===this.returnSecretKey()?(this.hidePop(),x("secretKey",this.secretKey),this.secretKey=""):v({title:"密钥错误",icon:"error"})},returnSecretKey(){let e=new Date;return e.setHours(12,0,0,0),btoa(e.getTime()/1e3)},getSecretKey(){I({data:this.returnSecretKey()})},change(e){this.current=e.detail.current},handleSub(e,t){let s=Number(this.bottomList[t].left);s-=1,this.bottomList[t].left=s||999,x("bottomList",this.bottomList);let l=k("selectList")||[];if(l.find((t=>t.id==e.id))){let t=l.findIndex((t=>t.id==e.id));l[t].count+=1}else l.push({...e,count:1});x("selectList",l)}}},[["render",function(e,t,i,c,u,p){const b=h,g=f,k=L(s("uni-search-bar"),U),w=L(s("uni-icons"),$),x=K,S=V,C=L(s("uni-swiper-dot"),D),v=L(s("uni-easyinput"),T),I=L(s("uni-popup"),F);return l(),o(b,null,{default:a((()=>[r(b,{class:"top"},{default:a((()=>[r(b,{class:"top-bg"}),r(b,{class:"search-box"},{default:a((()=>[r(g,{class:"title"},{default:a((()=>[n(d(u.title),1)])),_:1}),r(k,{class:"search-bar",radius:"100",placeholder:"输入任务编号搜索",clearButton:"none",cancelButton:"none"}),r(w,{type:"scan",size:"24",color:"#fff"})])),_:1}),r(C,{info:u.info,current:u.current,field:"content",mode:u.mode},{default:a((()=>[r(S,{class:"swiper-box",interval:3500,autoplay:!0,onChange:p.change},{default:a((()=>[(l(!0),m(_,null,y(u.info,((e,t)=>(l(),o(x,{key:t},{default:a((()=>[r(b,{class:"swiper-item"},{default:a((()=>[B("img",{src:e.url,alt:"",srcset:""},null,8,["src"])])),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["onChange"])])),_:1},8,["info","current","mode"])])),_:1}),r(b,{class:"center"},{default:a((()=>[(l(!0),m(_,null,y(u.centerList,((e,t)=>(l(),o(b,{class:"center-box",key:t},{default:a((()=>[B("img",{src:e.img,alt:""},null,8,["src"]),r(b,{class:"title"},{default:a((()=>[n(d(e.title),1)])),_:2},1024),r(b,{class:"type"},{default:a((()=>[n(d(e.type),1)])),_:2},1024),r(b,{class:"price"},{default:a((()=>[n("+"+d(e.price),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1}),r(b,{class:"bottom"},{default:a((()=>[r(b,{class:"bottom_nav"},{default:a((()=>[r(b,{class:"title"},{default:a((()=>[n("全部任务")])),_:1}),r(b,{class:"nav"},{default:a((()=>[r(g,{class:"active"},{default:a((()=>[n("默认排序")])),_:1}),r(g,null,{default:a((()=>[n("最新发布")])),_:1}),r(g,null,{default:a((()=>[n("佣金最高")])),_:1})])),_:1})])),_:1}),r(b,{class:"bottom-list"},{default:a((()=>[(l(!0),m(_,null,y(u.bottomList,((e,t)=>(l(),o(b,{class:"bottom-item",key:t},{default:a((()=>[r(b,{class:"img"},{default:a((()=>[B("img",{src:e.img,alt:""},null,8,["src"])])),_:2},1024),r(b,{class:"info"},{default:a((()=>[r(b,{class:"title"},{default:a((()=>[r(g,null,{default:a((()=>[n(d(e.title),1)])),_:2},1024),r(g,null,{default:a((()=>[n("+"+d(e.price),1)])),_:2},1024)])),_:2},1024),r(b,{class:"type"},{default:a((()=>[r(g,null,{default:a((()=>[n("ID:"+d(10320+t),1)])),_:2},1024),r(g,null,{default:a((()=>[n(d(e.type),1)])),_:2},1024)])),_:2},1024),r(b,{class:"left"},{default:a((()=>[r(g,null,{default:a((()=>[n("剩余 "+d(e.left)+"/已结 "+d(e.used),1)])),_:2},1024),r(g,{class:"btn",onClick:s=>p.handleSub(e,t)},{default:a((()=>[n("接单")])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1}),r(I,{ref:"popup",type:"bottom",class:"popup-box","background-color":"#fff","border-radius":"10px 10px 0 0","is-mask-click":!1},{default:a((()=>[r(b,{class:"title",onLongpress:t[0]||(t[0]=e=>p.getSecretKey())},{default:a((()=>[n("请联系【系统管理员】获取密钥")])),_:1}),r(b,{class:"input"},{default:a((()=>[r(v,{focus:"",modelValue:u.secretKey,"onUpdate:modelValue":t[1]||(t[1]=e=>u.secretKey=e),placeholder:"请输入密钥"},null,8,["modelValue"])])),_:1}),r(b,{class:"btn",onClick:p.confirm},{default:a((()=>[n("确认")])),_:1},8,["onClick"])])),_:1},512)])),_:1})}],["__scopeId","data-v-460c7e9f"]]);export{O as default};
